/*
 Hype TextPath Extension v1.1.5
 Copyright (2019-2024) Max Ziebell, (https://maxziebell.de). MIT-license
*/
'use strict';!1==="HypeTextPath"in window&&(window.HypeTextPath=function(){function t(b){b.querySelectorAll("[data-text-path] text").forEach(function(c){c.parentElement.removeChild(c)})}function m(b){g&&t(b);b.querySelectorAll("[data-text-path]").forEach(function(c){var a=c.dataset.textPath;a&&(c=c.querySelector("svg"),k(c,b,a))});g&&u(b)}function k(b,c,a){a=c.querySelector('[data-text-content="'+a+'"]');c=b.querySelector("path");if(a&&c){var d=b.querySelector("text");d&&d.parentElement.removeChild(d);
g||(c.style.opacity=0,a.style.opacity=0,c.style.pointerEvents="none");d=document.createElementNS("http://www.w3.org/2000/svg","text");var e=document.createElementNS("http://www.w3.org/2000/svg","textPath");d.appendChild(e);e.textContent=a.querySelector("innerhtmldiv")?a.querySelector("innerhtmldiv").textContent:a.textContent||a.innerText;n(a,d);a=parseInt(d.style.fontSize);b.style.setProperty("padding",a+"px","important");b.style.setProperty("margin-left","-"+a+"px","important");b.style.setProperty("margin-top",
"-"+a+"px","important");b.style.setProperty("overflow","visible","important");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+c.id);e.setAttribute("href","#"+c.id);p(c,e);b.appendChild(d);g&&(d.style.pointerEvents="none",d.style.webkitUserSelect="none",e.style.pointerEvents="none",e.style.webkitUserSelect="none");v(c,e)}}function n(b,c){["fontFamily","fontSize",["color","fill"],"letterSpacing","wordSpacing","fontWeight","fontStyle","textDecoration"].forEach(function(a){var d=Array.isArray(a);
c.style[d?a[1]:a]=b.style[d?a[0]:a]})}function p(b,c){if("string"===typeof b.getAttribute("stroke-dasharray")){var a=Number(b.getAttribute("stroke-dashoffset"));b=b.getTotalLength();c.setAttribute("startOffset",(100*(1-a/b)).toFixed(2)+"%")}}function v(b,c){var a=new MutationObserver(function(d){d.forEach(function(e){"attributes"===e.type&&"stroke-dashoffset"===e.attributeName&&p(e.target,c)})});a.observe(b,{attributes:!0,attributeFilter:["stroke-dashoffset"]});l.set(b,a)}function u(b){(new MutationObserver(function(c){c.forEach(function(a){var d=
a.target;if("attributes"===a.type){var e=d.dataset.textPath||d.dataset.textContent;!a.oldValue||"data-text-path"!==a.attributeName&&"data-text-content"!==a.attributeName||w(b,a.oldValue);if(e){const f=b.querySelector(`[data-text-path="${e}"] svg`);f&&k(f,b,e)}}"data-text-content"===a.attributeName&&q(b,d);"childList"===a.type&&(a.addedNodes.forEach(f=>{if(1===f.nodeType&&(f.dataset.textPath||f.dataset.textContent)){var h=f.dataset.textPath||f.dataset.textContent;f=f.querySelector("svg");k(f,b,h)}}),
a.removedNodes.forEach(f=>{1===f.nodeType&&f.querySelectorAll("path").forEach(h=>{var r=l.get(h);r&&(r.disconnect(),l.delete(h))})}));d.classList.contains("HYPE_InnerHTML_Div")&&(e=d.closest("[data-text-content]")?.dataset.textContent)&&q(b,d.closest("[data-text-content]"));"style"===a.attributeName&&(e=d.closest("[data-text-content]")?.dataset.textContent)&&(a=d.closest("[data-text-content]"),e=b.querySelector(`[data-text-path="${e}"] text`),a&&e&&n(a,e))})})).observe(b,{attributes:!0,subtree:!0,
attributeOldValue:!0,attributeFilter:["data-text-path","data-text-content","stroke-dashoffset","style"],childList:!0,characterData:!0})}function q(b,c){var a=c.dataset.textContent,d=c.querySelector("innerhtmldiv");c=d?d.textContent:c.textContent||c.innerText;if(b=b.querySelector(`[data-text-path="${a}"] textPath`))b.textContent=c}function w(b,c){(b=b.querySelector(`[data-text-path="${c}"] textPath`))&&b.parentElement.removeChild(b)}const g=-1!=window.location.href.indexOf("/Hype/Scratch/HypeScratch."),
l=new WeakMap;!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeSceneLoad",callback:function(b,c,a){m(c)}});g&&document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){m(document.body)},100)});return{version:"1.1.5"}}());
